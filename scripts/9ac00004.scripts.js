"use strict";angular.module("angularFlickrApp",["ngRoute","FlickrAPI","ui.bootstrap"]).config(["$routeProvider","FlickrProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:photoset_title/:photoset_id",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"}),b.setApiKey("1dee747a9a6ebfdaf9e85f8315e22771"),b.setUserId("68069990@N00")}]).run(["$rootScope",function(a){a.photosets=[]}]),angular.module("angularFlickrApp").controller("MainCtrl",["$rootScope","$scope","$routeParams","Flickr","$modal",function(a,b,c,d,e){var f=c.photoset_id||"72157633160214894";b.getMaxPicture=function(a){var b=a.url_k||a.url_h||a.url_l||a.url_z;return b},b.openImage=function(a){{var b=a.url_z;e.open({template:'<img ng-src="'+b+'" ng-click="closeImage()" class="full-screen-image"/>',controller:function(a,b){a.closeImage=function(){b.close()}}})}},a.photosets&&a.photosets[f]?b.photoset=a.photosets[f]:d.getSet(f,"url_q,url_z,url_l,url_h,url_k").then(function(c){b.photoset=c.photoset,a.photosets[f]=c.photoset})}]),angular.module("FlickrAPI",[]).provider("Flickr",function(){var a="http://api.flickr.com/services/rest/?format=json",b="",c="",d="url_l";this.setApiKey=function(a){b=a||b},this.setUserId=function(a){c=a||c},this.$get=["$q","$http",function(e,f){var g={getCollections:function(){var d=e.defer();return f({method:"JSONP",url:a,params:{api_key:b,user_id:c,jsoncallback:"JSON_CALLBACK",method:"flickr.collections.getTree"}}).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise},getSet:function(c,g){var h=e.defer();return f({method:"JSONP",url:a,params:{api_key:b,photoset_id:c,jsoncallback:"JSON_CALLBACK",method:"flickr.photosets.getPhotos",extras:g||d}}).success(function(a){h.resolve(a)}).error(function(a){h.reject(a)}),h.promise}};return g}]}),angular.module("angularFlickrApp").controller("GallerylistCtrl",["$scope","Flickr",function(a,b){b.getCollections().then(function(b){a.collections=b.collections})}]);